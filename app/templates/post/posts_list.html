{% extends 'base.html' %}

{% block content %}
    {% for post in posts.items %}
        <div class="post">
            <p><a href="{{ url_for('post.post', post_id=post.id) }}">{{ post.title }}</a>
            by <a href="{{ url_for('user.user_posts', username=post.author.username) }}">{{ post.author.username }}</a>.</p>
            <p>{{ post.content }}</p>
            <hr>
        </div>
    {% endfor %}
<!-- Pagination Links-->
    <div class="pagination">
        <a href="{{ url_for('post.posts_list', page=posts.prev_num) }}"
           class="{% if posts.page == posts.pages %}disabled{% endif %}">
            &laquo;
        </a>
<!-- Loop through the number of pages to display a link for each-->
        {% for page_num in posts.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
            {% if page_num %}
    <!-- Check for the active page and set the link to "Active"-->
                {% if posts.page == page_num %}
                    <a href="{{ url_for('post.posts_list', page=page_num) }}">
                        {{ page_num }}
                    </a>
                {% else %}
                    <a href="{{ url_for('post.posts_list', page=page_num) }}">
                        {{ page_num }}
                    </a>
                {% endif %}
            {% else %}
                ...
            {% endif %}
        {% endfor %}
        <a href="{{ url_for('post.posts_list', page=posts.next_num) }}"
           class="{% if posts.page == posts.pages %}disabled{% endif %}">
            &raquo;
        </a>
    </div>
{% endblock %}